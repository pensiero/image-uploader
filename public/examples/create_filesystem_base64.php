<?php

// everything relative to the application root
chdir(dirname(realpath(__DIR__ . '/..')));

// Composer autoloading
require_once __DIR__ . '/../../vendor/autoload.php';

$image = new \ImageUploader\Entity\Image();
$image->setSaveHandler(new \ImageUploader\SaveHandler\Filesystem());

$base64 = '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
EW4gHBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/9k=';

$response = $image->upload($base64, 0, 500);

header('Content-Type: application/json');

echo json_encode($response);

exit();
